package game;

import java.util.ArrayList;

import engine.rendering.shapes.Oval;
import engine.utils.math.Vector2f;

public class Body extends Oval{
	public static ArrayList<Boolean> IDs = new ArrayList<Boolean>();
	
	public float r;
	public float m;
	public int ID;
	public Vector2f velocity;
	
	public Body(Vector2f pos, float r, float m) {
		super(pos, new Vector2f(r*2, r*2));
		this.r = r;
		this.m = m;
		
		boolean found = false;
		
		for(int i = 0;i < IDs.size();i++) {
			if(!IDs.get(i)) {
				ID = i;
				IDs.set(i, true);
				found = true;
			}
		}
		
		if(!found) {
			ID = IDs.size();
			IDs.add(true);
		}
	}
	
	public Vector2f getForce(Body other) {
		float d = (float)Math.sqrt(
				(pos.x - other.pos.x)*(pos.x - other.pos.x) +
				(pos.y - other.pos.y)*(pos.y - other.pos.y));
		
		float force = m*other.m/(d*d);
		
		return new Vector2f(force*(other.pos.x - pos.x)/d, force*(other.pos.y - pos.y)/d);
	}
	
	public void tick(float time) {
		Vector2f force = new Vector2f();
		
		for(Body b : Universe.bodies) {
			if(b.ID != ID) {
				force.add(getForce(b));
			}
		}
		
		force.mult(time);
		pos.add(force);
	}
}
